# Fullstack devlopment demo
A complete full-stack development demo covers most of the technical requirements in the actual development.
- Back-end:  
  Koa2 http/https RESTful API server && SPA static support
- Front-end:  
  React SPA with libs such as reactstrap, redux, react-router, formik ...  

In this small demo, the back and front end work together from the development to the production stage, finally present a jwt-based token authentication and seamless refresh mechanism similar to OAuth.  

Here you will see:  
> From REST API server, database operations, the use of mainstream koa middleware, jest unit testing, nodejs command line interface,  
To responsive UI, http request and interceptor, global and local data flow management, hook and HOC, routing management, CSS/SCSS/Style, form processing and verification etc.  

## Installation
Clone the repository
```
git clone https://github.com/PaulAllRounder/koa-react-fullstack-devdemo.git
```
Install dependencies for the front and back ends separately
```
cd mykoa
npm install
cd reactspa
npm install
```
## Usage
The control has been integrated in the back-end, so there's no need to enter the front and back end and operate separately.
```
cd mykoa
```
### Development mode
```
npm run devcon
```
This will start the back-end server and front-end webpack at the same time.   
The front-end has been proxy configured, so SPA can directly access the back-end API.  
Open Chrome and enter address:
```
localhost:3000
```
> Note: You need to install nodemon globally, otherwise modify nodemon in packge.json to node.

### Production mode
``` 
npm run productserver
```
The back-end server will start with https, enter the address in Chrome:
```
localhost:5000
```
The server will automatically jump to https protocal localhost:5001.
> Note:
> 1. Go to front-end to build first (cd reactspa; npm run build).
> 2. Server'll static SPA at build/index.html.
> 3. The https uses a self-signed SSL certificate generated by OpenSSL, so Chrome will give a warning. Just accept it.

### Backend unit test
```
npm run test
```
Limit the test scope, 100% test pass and coverage.

### Oprate data table with CLI
The pet data table in the SQLite database has built-in pet data, and I also provide CLI for you to modify it.
```
npm run pets
```
The data of each pet's field is randomly generated by faker, so rest assured to use this CLI to operate it.

## Tips
- The back-end config.js is a configuration file, please confirm it before modifying.
- I set jwt token expire after 10S for better experience the token seamless refresh.
- When login needed, you can directly click the "Paul's account" button in the modal.
